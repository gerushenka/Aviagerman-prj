# Содержание
1. [Введение](#1-введение)
2. [Требования пользователя](#2-требования-пользователя)  
   2.1 [Программные интерфейсы](#21-программные-интерфейсы)  
   2.2 [Интерфейс пользователя](#22-интерфейс-пользователя)  
   2.3 [Характеристики пользователей](#23-характеристики-пользователей)  
   2.4 [Предположения и зависимости](#24-предположения-и-зависимости)  
3. [Системные требования](#3-системные-требования)  
   3.1 [Функциональные требования](#31-функциональные-требования)  
   3.2 [Нефункциональные требования](#32-нефункциональные-требования)  
      3.2.1 [Атрибуты качества](#321-атрибуты-качества)  
4. [Модель предметной области](#4-модель-предметной-области)  
   4.1 [Диаграмма классов](#41-диаграмма-классов)  
   4.2 [Глоссарий к диаграмме классов](#41-глоссарий-к-диаграмме-классов)  
5. [Модель вариантов использования](#5-модель-вариантов-использования)  
   5.1 [Диаграмма вариантов использования](#51-диаграмма-вариантов-использования)  
   5.2 [Поток событий](#52-поток-событий)  
6. [Графический материал](#6-графический-материал)  
   6.1 [Диаграммы активности](#61-диаграммы-активности)  
      6.1.1 [Диаграмма активности 1](#611-диаграмма-активности-1)  
      6.1.2 [Диаграмма активности 2](#612-диаграмма-активности-2)  
      6.1.3 [Диаграмма активности 3](#613-диаграмма-активности-3)  
   6.2 [Диаграммы последовательности](#62-диаграммы-последовательности)  
      6.2.1 [Диаграмма последовательности 1](#621-диаграмма-последовательности-1)  
      6.2.2 [Диаграмма последовательности 2](#622-диаграмма-последовательности-2)  
      6.2.3 [Диаграмма последовательности 3](#623-диаграмма-последовательности-3)  
   6.3 [Диаграммы состояний](#63-диаграммы-состояний)  
      6.3.1 [Диаграмма состояния 1](#631-диаграмма-состояния-1)  
      6.3.2 [Диаграмма состояния 2](#632-диаграмма-состояния-2)  
      6.3.3 [Диаграмма состояния 3](#633-диаграмма-состояния-3)  
   6.4 [Диаграмма компонентов и развертывания](#64-диаграмма-компонентов-и-развертывания)
   
## 1. Введение
Aviagerman - это мобильное приложение для бронирования авиабилетов. Продукт предназначен для помощи пользователям в поиске, бронировании и управлении авиабилетами, а также для администрирования рейсов.

Основные функции:
- Поиск доступных рейсов по дате или просмотр всех рейсов
- Бронирование билетов на выбранные рейсы
- Управление существующими бронированиями
- Создание и управление профилем пользователя
- Административные функции для добавления новых рейсов

Продукт не включает в себя функции онлайн-оплаты или интеграции с системами авиакомпаний. Он предназначен для демонстрации возможностей разработки мобильных приложений с использованием современных технологий Android.

## 2. Требования пользователя

### 2.1 Программные интерфейсы

- Android SDK 21+
- Jetpack Compose для создания пользовательского интерфейса
- Room для локального хранения данных
- Kotlin Coroutines для асинхронных операций
- JNI для интеграции нативного кода C++

### 2.2 Интерфейс пользователя

Интерфейс будет реализован в виде мобильного приложения для Android с использованием Material Design 3. Основные экраны:

1. Поиск билетов

   ![search](/docs/mockups/search.jpg)

2. Мои брони

   ![bookings](/docs/mockups/bookings.jpg)

3. Авторизация пользователя

   ![login](/docs/mockups/login.jpg)

4. Добавление рейса (для администраторов)

   ![add](/docs/mockups/add.jpg)

5. Подтверждение бронирования

   ![comfirm](/docs/mockups/confirm.jpg)

### 2.3 Характеристики пользователей

Целевая аудитория - люди, ищущие и бронирующие авиабилеты. Предполагается базовый уровень владения смартфоном и приложениями. Также предусмотрены пользователи с ролью администратора для управления рейсами.

### 2.4 Предположения и зависимости

- Приложение будет работать на устройствах с Android 5.0 (API level 21) и выше
- Для хранения данных будет использоваться локальная база данных Room
- Часть функциональности может зависеть от нативного кода, реализованного на C++

## 3. Системные требования

### 3.1 Функциональные требования

- Пользователь может осуществлять поиск доступных рейсов по дате
- Пользователь может просматривать список всех доступных рейсов
- Зарегистрированный пользователь может бронировать билеты на выбранные рейсы
- Пользователь может просматривать свои текущие бронирования
- Пользователь может отменять свои бронирования
- Пользователь может создавать аккаунт и входить в систему
- Администратор может добавлять новые рейсы в систему
- Приложение должно отображать список доступных рейсов
- Приложение должно отображать список бронирований пользователя
- Пользователь должен иметь возможность выбрать дату для поиска рейсов

### 3.2 Нефункциональные требования

#### 3.2.1 Атрибуты качества

- Производительность: приложение должно быстро реагировать на действия пользователя
- Надежность: приложение должно сохранять данные пользователя и информацию о бронированиях даже при неожиданном закрытии
- Удобство использования: интерфейс должен быть интуитивно понятным и соответствовать принципам Material Design 3
- Безопасность: все данные пользователя должны храниться только локально на устройстве
- Масштабируемость: приложение должно эффективно работать с большим количеством рейсов и пользователей

## 4. Модель предметной области
   
### 4.1 Диаграмма классов

   ![Alt-текст](/docs/class/classDiagram.png)

### 4.2 Глоссарий к диаграмме классов

| Класс/Интерфейс      | Описание и Методы                                                                                                                                                                                                                                           |
|----------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `MainActivity`       | Основной класс активности, который управляет экранами и взаимодействиями. <br> **Методы:** <ul><li>`onCreate/saveInstanceState`</li><li>`BookingsScreen(userDao, bookingDao, flightDao, nickname)`</li><li>`AddFlightDialog(onDismiss: () -> Boolean)`</li><li>`ProfileScreen(userDao)`</li><li>`RegistrationScreen(userDao, onRegisterSuccess: (String) -> Unit)`</li><li>`LoginScreen(userDao, onLoginSuccess: (String) -> Unit)`</li></ul> |
| `MockUserDao`        | Моковая реализация `UserDao` для целей тестирования. <br> **Методы:** <ul><li>`suspend insertUser(user: User)`</li><li>`suspend getUser(nickname: String, password: String): User?`</li><li>`suspend getUsersByRole(role: String): List<User>`</li><li>`suspend getUserRole(nickname: String): String?`</li><li>`suspend getUserIdByNickname(nickname: String): Int?`</li></ul> |
| `MockBookingDao`     | Моковая реализация `BookingDao` для целей тестирования. <br> **Методы:** <ul><li>`suspend insertBooking(booking: Booking)`</li><li>`suspend getBookingsByUser(userId: Int): List<Booking>`</li><li>`suspend getBookingsByFlight(flightId: Int): List<Booking>`</li><li>`suspend deleteBookingById(id: Int)`</li><li>`suspend updateBookingStatus(bookingId: Int, status: String)`</li></ul> |
| `UserDao`            | Объект доступа к данным для операций с пользователями. <br> **Методы:** <ul><li>`suspend insertUser(user: User)`</li><li>`suspend getUser(nickname: String, password: String): User?`</li><li>`suspend getUsersByRole(role: String): List<User>`</li><li>`suspend getUserRole(nickname: String): String?`</li><li>`suspend getUserIdByNickname(nickname: String): Int?`</li></ul> |
| `BookingDao`         | Объект доступа к данным для операций с бронированиями. <br> **Методы:** <ul><li>`suspend insertBooking(booking: Booking)`</li><li>`suspend getBookingsByUser(userId: Int): List<Booking>`</li><li>`suspend getBookingsByFlight(flightId: Int): List<Booking>`</li><li>`suspend deleteBooking(booking: Booking)`</li><li>`suspend updateBookingStatus(bookingId: Int, status: String)`</li></ul> |
| `FlightDao`          | Объект доступа к данным для операций с рейсами. <br> **Методы:** <ul><li>`suspend insertFlight(flight: Flight)`</li><li>`suspend getAllFlights(): List<Flight>`</li><li>`suspend getFlightById(flightId: Int): Flight?`</li><li>`suspend deleteFlight(flight: Flight)`</li></ul> |
| `AppDatabase`        | Представляет базу данных приложения. <br> **Поля:** <ul><li>`userDao: UserDao`</li><li>`flightDao: FlightDao`</li><li>`bookingDao: BookingDao`</li></ul> |
| `BookingAdapter`     | Адаптер для управления и отображения данных о бронированиях. <br> **Методы:** <ul><li>`onCreateViewHolder(parent: ViewGroup, viewType: Int): BookingViewHolder`</li><li>`onBindViewHolder(holder: BookingViewHolder, position: Int)`</li><li>`getItemCount(): Int`</li></ul> |
| `Booking`            | Сущность, представляющая бронирование. <br> **Поля:** <ul><li>`id: Int`</li><li>`userId: Int`</li><li>`flightId: Int`</li><li>`bookingDate: String`</li><li>`status: String`</li></ul> |
| `User`               | Сущность, представляющая пользователя. <br> **Поля:** <ul><li>`id: Int`</li><li>`nickname: String`</li><li>`password: String`</li><li>`role: String`</li></ul> |
| `Flight`             | Сущность, представляющая рейс. <br> **Поля:** <ul><li>`id: Int`</li><li>`flightNumber: String`</li><li>`departure: String`</li><li>`arrival: String`</li><li>`date: String`</li><li>`time: String`</li><li>`price: Double`</li></ul> |


## 5. Модель вариантов использования

### 5.1 Диаграмма вариантов использования

   ![Alt-текст](/docs/usage/userUsageDiagram.png)
   ![Alt-текст](/docs/usage/adminUsageDiagram.png)

### 5.2 Поток событий

# Содержание
1. [Актеры](#1-актеры)  
2. [Требования пользователя](#2-варианты-использования)  
   2.1 [Зарегистрировать аккаунт](#21-зарегистрировать-аккаунт)  
   2.2 [Войти в систему](#22-войти-в-систему)  
   2.3 [Добавить рейс](#23-добавить-рейс)  
   2.4 [Удалить Рейс](#24-удалить-рейс)  
   2.5 [Забронировать рейс](#25-забронировать-рейс)  
   2.6 [Удаление брони](#26-удаление-брони)  
3. [Глоссарий](#3-глоссарий)  
   
### 1. Актеры

| Актор      | Описание                                                                 |
|------------|--------------------------------------------------------------------------|
| Пользователь | Человек, использующий систему для бронирования авиабилетов. |
| Администратор | Человек, использующий систему для добавления рейсов. |

### 2. Варианты использования
#### 2.1 Зарегистрировать аккаунт

**Описание**: Пользователь регистрирует новый аккаунт в системе.
- **Предусловия**: Пользователь не зарегистрирован.
- **Основной поток**:
  1. Пользователь открывает страницу регистрации.
  2. Вводит необходимые данные (никнейм, пароль).
  3. Нажимает кнопку "Зарегистрироваться".
  4. Система проверяет корректность данных и создает аккаунт.
  5. Система подтверждает успешную регистрацию.
- **Альтернативные потоки**:
  1. Пользователь уже существует — система отображает сообщение об ошибке.

#### 2.2 Войти в систему

**Описание**: Пользователь авторизуется в системе.
- **Предусловия**: Пользователь зарегистрирован.
- **Основной поток**:
  1. Пользователь открывает страницу входа.
  2. Вводит никнейм и пароль.
  3. Нажимает "Войти".
  4. Система проверяет учетные данные.
  5. Система авторизует пользователя и предоставляет доступ к функционалу.
- **Альтернативные потоки**:
  1. Неправильные данные — система отображает сообщение об ошибке.

#### 2.3 Добавить рейс

**Описание**: Администратор добавляет рейс.
- **Предусловия**: Администратор авторизирован.
- **Основной поток**:
  1. Администратор нажимает кнопку "Добавить рейс".
  2. Заполняет поля(номер рейса, пункт отбытия, пункт прибытия, дата рейса, время рейса, цена рейса).
  3. Нажимает "Подтвердить данные".
  4. Нажимает "Внести в базу".
  5. Система добавляет рейс в базу данных.

#### 2.4 Удалить рейс

**Описание**: Администратор удаляет рейс.
- **Предусловия**: Рейсы существуют.
- **Основной поток**:
  1. Администратор нажимает кнопку "Просмотреть рейсы".
  2. Администратор нажимает на кнопку удаления рядом с рейсом.
  3. Система удаляет рейс из базы данных.
  
#### 2.5 Забронировать рейс

**Описание**: Пользователь бронирует рейс.
- **Предусловия**: Пользователь авторизован и рейсы существуют.
- **Основной поток**:
  1. Пользователь нажимает кнопку "Просмотреть рейсы" или "Выбрать дату".
  2. Пользователь нажимает на рейс и подтверждает бронирование.
  3. Система вносит рейс в базу данных.
  4. Рейс отображается на странице "Мои брони".

#### 2.6 Удаление брони

**Описание**: Пользователь удаляет забронированный рейс.
- **Предусловия**: Пользователь авторизован и забронировал хотя бы один рейс.
- **Основной поток**:
  1. Пользователь страницу "Мои брони".
  2. Пользователь удерживает рейс и подтверждает удаление.
  3. Система удаляет рейс из базы данных.

### 3. Глоссарий

| Термин     | Описание                                                                 |
|------------|--------------------------------------------------------------------------|
| Пользователь | Человек, использующий систему для бронирования авиабилетов. |
| Администратор | Человек, использующий систему для добавления и удаления рейсов. |
| Аккаунт    | Учетная запись пользователя, содержащая данные для входа и работы в системе. |
| Рейс       | Авиаперелет, который может быть забронирован пользователем. |
| Бронирование | Процесс резервирования места на рейс пользователем. |
| Мои брони  | Страница, на которой пользователь может видеть и управлять своими забронированными рейсами. |
| Регистрация | Процесс создания нового аккаунта в системе. |
| Авторизация | Процесс входа в систему с использованием учетных данных. |
| Удаление брони | Процесс отмены забронированного рейса пользователем. |
| Добавление рейса | Процесс добавления нового рейса в систему администратором. |
| Удаление рейса | Процесс удаления существующего рейса из системы администратором. |


## 6. Графический материал

### 6.1 Диаграммы активности

#### 6.1.1 Диаграмма активности 1

![Alt-текст](/docs/activity/activityAuth.png)

#### 6.1.2 Диаграмма активности 2

![Alt-текст](/docs/activity/activityBooking.png)

#### 6.1.3 Диаграмма активности 3

![Alt-текст](/docs/activity/activityDelete.png)

### 6.2 Диаграммы последовательности

#### 6.2.1 Диаграмма последовательности 1

![Alt-текст](/docs/sequence/sequenceAddFlight.png)

#### 6.2.2 Диаграмма последовательности 2

![Alt-текст](/docs/sequence/sequenceBooking.png)

#### 6.2.3 Диаграмма последовательности 3

![Alt-текст](/docs/sequence/sequenceDelete.png)

### 6.3 Диаграммы состояний

#### 6.3.1 Диаграмма состояния 1

![Alt-текст](/docs/state/stateAdd.png)

#### 6.3.2 Диаграмма состояния 2

![Alt-текст](/docs/state/stateBooking.png)

#### 6.3.3 Диаграмма состояния 3

![Alt-текст](/docs/state/stateMain.png)

### 6.4 Диаграмма компонентов и развертывания

![Alt-текст](/docs/component/component.png)
